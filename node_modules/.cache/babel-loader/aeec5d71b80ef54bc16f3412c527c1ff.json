{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/HP/weather-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/HP/weather-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/HP/weather-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{DateTime}from\"luxon\";var API_KEY='c30f47ecf7cae8fd0a2aaf19ddb20285';var BASE_URL=\"https://api.openweathermap.org/data/2.5\";function getWetherData(infoType,searchParams){var url=new URL(BASE_URL+'/'+infoType);url.search=new URLSearchParams(_objectSpread(_objectSpread({},searchParams),{},{appid:API_KEY}));return fetch(url).then(function(res){return res.json();});}function foramatCurrentWeather(data){var _data$coord=data.coord,lat=_data$coord.lat,lon=_data$coord.lon,_data$main=data.main,temp=_data$main.temp,feels_like=_data$main.feels_like,temp_min=_data$main.temp_min,temp_max=_data$main.temp_max,pressure=_data$main.pressure,humidity=_data$main.humidity,name=data.name,dt=data.dt,_data$sys=data.sys,country=_data$sys.country,sunrise=_data$sys.sunrise,sunset=_data$sys.sunset,weather=data.weather,speed=data.wind.speed;var _weather$=weather[0],details=_weather$.main,icon=_weather$.icon;return{lat:lat,lon:lon,temp:temp,feels_like:feels_like,temp_min:temp_min,temp_max:temp_max,pressure:pressure,humidity:humidity,name:name,dt:dt,country:country,sunrise:sunrise,sunset:sunset,details:details,icon:icon,speed:speed};}function formatForecastWeather(_x){return _formatForecastWeather.apply(this,arguments);}function _formatForecastWeather(){_formatForecastWeather=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var timezone,daily,hourly;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:timezone=data.timezone,daily=data.daily,hourly=data.hourly;daily=daily.slice(1,6).map(function(d){return{title:formatToLocalTime(d.dt,timezone,'ccc'),temp:d.temp.day,icon:d.weather[0].icon};});hourly=hourly.slice(1,6).map(function(d){return{title:formatToLocalTime(d.dt,timezone,'hh:mm a'),temp:d.temp,icon:d.weather[0].icon};});return _context.abrupt(\"return\",{timezone:timezone,daily:daily,hourly:hourly});case 4:case\"end\":return _context.stop();}}},_callee);}));return _formatForecastWeather.apply(this,arguments);}function getFormattedData(_x2){return _getFormattedData.apply(this,arguments);}function _getFormattedData(){_getFormattedData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(searchParams){var formattedCurrentWeather,lat,lon,formattedForecastWeather;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getWetherData('weather',searchParams).then(foramatCurrentWeather);case 2:formattedCurrentWeather=_context2.sent;lat=formattedCurrentWeather.lat,lon=formattedCurrentWeather.lon;_context2.next=6;return getWetherData('onecall',{lat:lat,lon:lon,exclude:\"current,minutely,alerts\",units:searchParams.units}).then(formatForecastWeather);case 6:formattedForecastWeather=_context2.sent;return _context2.abrupt(\"return\",_objectSpread(_objectSpread({},formattedCurrentWeather),formattedForecastWeather));case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _getFormattedData.apply(this,arguments);}function formatToLocalTime(secs,zone){var format=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"cccc, dd LLL, yyyy' | Local time: 'hh:mm a\";return DateTime.fromSeconds(secs).setZone(zone).toFormat(format);}var iconUrlFromCode=function iconUrlFromCode(code){return\"http://openweathermap.org/img/wn/\".concat(code,\".png\");};export default getFormattedData;export{formatToLocalTime,iconUrlFromCode};","map":{"version":3,"names":["DateTime","API_KEY","BASE_URL","getWetherData","infoType","searchParams","url","URL","search","URLSearchParams","appid","fetch","then","res","json","foramatCurrentWeather","data","coord","lat","lon","main","temp","feels_like","temp_min","temp_max","pressure","humidity","name","dt","sys","country","sunrise","sunset","weather","speed","wind","details","icon","formatForecastWeather","timezone","daily","hourly","slice","map","d","title","formatToLocalTime","day","getFormattedData","formattedCurrentWeather","exclude","units","formattedForecastWeather","secs","zone","format","fromSeconds","setZone","toFormat","iconUrlFromCode","code"],"sources":["C:/Users/HP/weather-app/src/services/WeatherServices.js"],"sourcesContent":["import { DateTime } from \"luxon\";\r\n\r\nconst API_KEY = 'c30f47ecf7cae8fd0a2aaf19ddb20285'\r\nconst BASE_URL = \"https://api.openweathermap.org/data/2.5\"\r\n\r\nfunction getWetherData(infoType, searchParams) {\r\n    const url = new URL(BASE_URL + '/' + infoType)\r\n    url.search = new URLSearchParams({...searchParams, appid: API_KEY})\r\n    return fetch(url).then((res) => res.json());\r\n}\r\n\r\nfunction foramatCurrentWeather(data) {\r\n    const {coord: {lat, lon},\r\n            main: {temp,feels_like,temp_min,temp_max,pressure,humidity}, \r\n            name, \r\n            dt,\r\n            sys:{country, sunrise, sunset},\r\n            weather,\r\n            wind: {speed}} = data\r\n    const {main: details, icon} = weather[0]\r\n    return {lat, lon, temp, feels_like, temp_min, temp_max, pressure, \r\n        humidity, name, dt, country, sunrise, sunset, details, icon, speed}\r\n}\r\n\r\n\r\nasync function formatForecastWeather(data) {\r\n    let {timezone, daily, hourly} = data\r\n    daily = daily.slice(1, 6).map((d) => {\r\n        return {\r\n            title: formatToLocalTime(d.dt, timezone, 'ccc'),\r\n            temp: d.temp.day,\r\n            icon: d.weather[0].icon\r\n        }\r\n    })\r\n    hourly = hourly.slice(1, 6).map((d) => {\r\n        return {\r\n            title: formatToLocalTime(d.dt, timezone, 'hh:mm a'),\r\n            temp: d.temp,\r\n            icon: d.weather[0].icon\r\n        }\r\n    });\r\n\r\n    return {timezone, daily , hourly}\r\n}\r\n\r\nasync function getFormattedData (searchParams) {\r\n    const formattedCurrentWeather = await getWetherData('weather', searchParams).then(foramatCurrentWeather)\r\n    const {lat, lon} = formattedCurrentWeather\r\n    const formattedForecastWeather = await getWetherData('onecall', {lat, lon, exclude: \"current,minutely,alerts\", units: searchParams.units})\r\n    .then(formatForecastWeather)\r\n    return {...formattedCurrentWeather, ...formattedForecastWeather}\r\n}\r\n\r\nfunction formatToLocalTime(secs, zone, format = \"cccc, dd LLL, yyyy' | Local time: 'hh:mm a\") {\r\n     return DateTime.fromSeconds(secs).setZone(zone).toFormat(format)\r\n}\r\n\r\nconst iconUrlFromCode = (code) => {\r\n    return `http://openweathermap.org/img/wn/${code}.png`\r\n}\r\n\r\nexport default getFormattedData;\r\nexport {formatToLocalTime, iconUrlFromCode}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}