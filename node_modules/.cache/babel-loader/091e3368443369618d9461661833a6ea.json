{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/HP/weather-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/HP/weather-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/HP/weather-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/HP/weather-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.css';import React from'react';import TopBtns from'./components/TopBtns';import Inputs from'./components/Inputs';import TimeaAndLocation from'./components/TimeaAndLocation';import TempDetails from'./components/TempDetails';import Forecast from'./components/Forecast';import getFormattedData from'./services/WeatherServices';import{ToastContainer,toast}from'react-toastify';import{ReactNotifications,Store}from'react-notifications-component';import'react-toastify/dist/ReactToastify.css';import'react-notifications-component/dist/theme.css';import Modal from'./components/Modal';import{UilAngleDown}from'@iconscout/react-unicons';import DropDownContent from'./components/DropDownContent';import{motion,AnimatePresence}from'framer-motion';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),location=_React$useState2[0],setLocation=_React$useState2[1];var currentUserCity=localStorage.getItem(\"usercity\");var userLocationCoords=localStorage.getItem(\"userCoords\");var _React$useState3=React.useState(userLocationCoords?JSON.parse(userLocationCoords):{q:currentUserCity?currentUserCity:'berlin'}),_React$useState4=_slicedToArray(_React$useState3,2),query=_React$useState4[0],setQuery=_React$useState4[1];var _React$useState5=React.useState('metric'),_React$useState6=_slicedToArray(_React$useState5,2),units=_React$useState6[0],setUnit=_React$useState6[1];var _React$useState7=React.useState(null),_React$useState8=_slicedToArray(_React$useState7,2),weather=_React$useState8[0],setWeather=_React$useState8[1];var _React$useState9=React.useState(true),_React$useState10=_slicedToArray(_React$useState9,2),showMore=_React$useState10[0],setShowMore=_React$useState10[1];var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),showDropDown=_React$useState12[0],setShowDropDown=_React$useState12[1];var _React$useTransition=React.useTransition(),_React$useTransition2=_slicedToArray(_React$useTransition,2),isPending=_React$useTransition2[0],startTransition=_React$useTransition2[1];React.useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var msg;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:msg=query.q?query.q:'current location';toast.info('Fetching weather for '+msg);_context.next=4;return getFormattedData(_objectSpread(_objectSpread({},query),{},{units:units})).then(function(data){toast.success(\"Successfully fetched weather for \".concat(data.name,\", \").concat(data.country));setWeather(data);});case 4:case\"end\":return _context.stop();}}},_callee);}))();},[query,units]);React.useEffect(function(){if(showMore||showDropDown){document.body.style.overflow=\"hidden\";}else{document.body.style.overflow=\"auto\";}});function formatBg(){var thresold=units==='metric'?20:60;if(!weather||weather.temp<=thresold){return'from-cyan-700 to-blue-700';}else{return'from-yellow-700 to-orange-700';}}function handleCloseMore(){if(showMore){setShowMore(false);}else if(showDropDown){setShowDropDown(false);}}function settingUserLocation(){if(location){startTransition(function(){handleCloseMore();});localStorage.setItem(\"usercity\",location);localStorage.removeItem('userCoords');setQuery({q:location});}else if(location===\"\"){alert('please provide your city name');}}function detectUserLocation(){startTransition(function(){handleCloseMore();});if(navigator.geolocation){toast.info('Fetching your location');navigator.geolocation.getCurrentPosition(function(position){var lat=position.coords.latitude;var lon=position.coords.longitude;var coords={lat:lat,lon:lon};localStorage.setItem(\"userCoords\",JSON.stringify(coords));localStorage.removeItem('usercity');setQuery(coords);});}}return/*#__PURE__*/_jsxs(_Fragment,{children:[showMore&&/*#__PURE__*/_jsx(Modal,{showMore:showMore,handleCloseMore:handleCloseMore,location:location,setLocation:setLocation,settingUserLocation:settingUserLocation,isPending:isPending,detectUserLocation:detectUserLocation}),/*#__PURE__*/_jsx(AnimatePresence,{initial:false,children:showDropDown&&/*#__PURE__*/_jsx(motion.div,{initial:\"collapsed\",animate:\"open\",exit:\"collapsed\",variants:{open:{opacity:1,height:\"auto\"},collapsed:{opacity:0,height:0}},transition:{duration:0.8,ease:[0.04,0.62,0.23,0.98]},children:/*#__PURE__*/_jsx(DropDownContent,{handleCloseMore:handleCloseMore,weather:weather})},\"content\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"App mx-auto m-4 px-3 py-3 bg-gradient-to-br \".concat(formatBg(),\" h-fit shadow-xl shadow-gray-400 md:py-5 md:px-32\"),children:[/*#__PURE__*/_jsxs(motion.button,{type:\"button\",whileTap:{scale:0.9},className:\"text-white inline-flex\",onClick:function onClick(){return setShowDropDown(true);},children:[/*#__PURE__*/_jsx(\"p\",{children:\"Petlad, IN\"}),/*#__PURE__*/_jsx(UilAngleDown,{size:20})]}),/*#__PURE__*/_jsx(TopBtns,{setQuery:setQuery,showMore:showMore,setShowMore:setShowMore}),/*#__PURE__*/_jsx(Inputs,{setQuery:setQuery,units:units,setUnit:setUnit}),weather&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TimeaAndLocation,{weather:weather}),/*#__PURE__*/_jsx(TempDetails,{weather:weather}),/*#__PURE__*/_jsx(Forecast,{title:\"hourly forecast\",items:weather.hourly}),/*#__PURE__*/_jsx(Forecast,{title:\"daily forecast\",items:weather.daily})]}),/*#__PURE__*/_jsx(ToastContainer,{autoClose:5000,theme:\"colored\",newestOnTop:true})]})]});}export default App;","map":{"version":3,"names":["React","TopBtns","Inputs","TimeaAndLocation","TempDetails","Forecast","getFormattedData","ToastContainer","toast","ReactNotifications","Store","Modal","UilAngleDown","DropDownContent","motion","AnimatePresence","App","useState","location","setLocation","currentUserCity","localStorage","getItem","userLocationCoords","JSON","parse","q","query","setQuery","units","setUnit","weather","setWeather","showMore","setShowMore","showDropDown","setShowDropDown","useTransition","isPending","startTransition","useEffect","msg","info","then","data","success","name","country","document","body","style","overflow","formatBg","thresold","temp","handleCloseMore","settingUserLocation","setItem","removeItem","alert","detectUserLocation","navigator","geolocation","getCurrentPosition","position","lat","coords","latitude","lon","longitude","stringify","open","opacity","height","collapsed","duration","ease","scale","hourly","daily"],"sources":["C:/Users/HP/weather-app/src/App.js"],"sourcesContent":["import './App.css';\nimport React from 'react';\nimport TopBtns from './components/TopBtns';\nimport Inputs from './components/Inputs';\nimport TimeaAndLocation from './components/TimeaAndLocation';\nimport TempDetails from './components/TempDetails';\nimport Forecast from './components/Forecast';\nimport getFormattedData from './services/WeatherServices';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { ReactNotifications, Store } from 'react-notifications-component'\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'react-notifications-component/dist/theme.css'\nimport Modal from './components/Modal';\nimport { UilAngleDown } from '@iconscout/react-unicons'\nimport DropDownContent from './components/DropDownContent';\nimport {motion, AnimatePresence} from 'framer-motion'\n\n\nfunction App() {\n\n  const [location, setLocation] = React.useState(\"\")\n  const currentUserCity = localStorage.getItem(\"usercity\");\n  const userLocationCoords = localStorage.getItem(\"userCoords\");\n  const [query, setQuery] = React.useState(userLocationCoords ? JSON.parse(userLocationCoords) : {q: currentUserCity ? currentUserCity : 'berlin' })\n  const [units, setUnit] = React.useState('metric')\n  const [weather, setWeather] = React.useState(null)\n  const [showMore, setShowMore] = React.useState(true)\n  const [showDropDown, setShowDropDown] = React.useState(false)\n  const [isPending, startTransition] = React.useTransition()\n\n  React.useEffect(() => {\n    (async function () {\n      const msg = query.q ? query.q : 'current location'\n      toast.info('Fetching weather for ' + msg)\n      await getFormattedData({...query, units}).then((data) => {\n        toast.success(`Successfully fetched weather for ${data.name}, ${data.country}`)\n        setWeather(data)\n      })\n    })()\n  },[query, units])\n\n  React.useEffect(() => {\n    if (showMore || showDropDown) {\n        document.body.style.overflow = \"hidden\";\n    } else {\n        document.body.style.overflow = \"auto\";\n    }\n  })\n\n  function formatBg() {\n    const thresold = units === 'metric'? 20 : 60\n    if (!weather || weather.temp <= thresold) {\n      return 'from-cyan-700 to-blue-700'\n    }else{\n      return 'from-yellow-700 to-orange-700'\n    }\n  }\n\n  function handleCloseMore() {\n    if (showMore) {\n      setShowMore(false)\n    } else if (showDropDown) {\n      setShowDropDown(false)\n    }\n  }\n\n  function settingUserLocation() {\n    if(location){\n      startTransition(() => {\n        handleCloseMore()\n      })\n      localStorage.setItem(\"usercity\", location);\n      localStorage.removeItem('userCoords');\n      setQuery({q: location})\n    }else if(location === \"\") {\n      alert('please provide your city name')\n    }\n  }\n\n  function detectUserLocation() {\n    startTransition(() => {\n      handleCloseMore()\n    })\n    if (navigator.geolocation) {\n      toast.info('Fetching your location')\n      navigator.geolocation.getCurrentPosition((position) => {\n        let lat = position.coords.latitude\n        let lon = position.coords.longitude\n        let coords = {lat, lon}\n        localStorage.setItem(\"userCoords\",JSON.stringify(coords));\n        localStorage.removeItem('usercity');\n        setQuery(coords)\n      })\n    }\n  }\n\n  return (<>\n    {showMore && <Modal showMore={showMore} \n      handleCloseMore={handleCloseMore} \n      location={location}\n      setLocation={setLocation}\n      settingUserLocation={settingUserLocation} \n      isPending={isPending}\n      detectUserLocation={detectUserLocation}/>} \n    <AnimatePresence initial={false}>\n      {showDropDown && \n      <motion.div key=\"content\"\n      initial=\"collapsed\"\n      animate=\"open\"\n      exit=\"collapsed\"\n      variants={{\n        open: { opacity: 1, height: \"auto\" },\n        collapsed: { opacity: 0, height: 0 }\n      }}\n      transition={{ duration: 0.8, ease: [0.04, 0.62, 0.23, 0.98] }}>\n        <DropDownContent \n          handleCloseMore={handleCloseMore} \n          weather={weather}/>\n      </motion.div>}\n    </AnimatePresence>\n    <div className={`App mx-auto m-4 px-3 py-3 bg-gradient-to-br ${formatBg()} h-fit shadow-xl shadow-gray-400 md:py-5 md:px-32`}>\n      <motion.button type='button' whileTap={{scale: 0.9}} className='text-white inline-flex' onClick={() => setShowDropDown(true)}>\n        <p>Petlad, IN</p>\n        <UilAngleDown size={20}/>\n      </motion.button>\n      <TopBtns setQuery={setQuery} showMore={showMore} setShowMore={setShowMore}/>\n      <Inputs setQuery={setQuery} units={units} setUnit={setUnit}/>\n      {weather && (\n        <>\n          <TimeaAndLocation weather={weather}/>\n          <TempDetails weather={weather}/>\n          <Forecast title=\"hourly forecast\" items={weather.hourly}/>\n          <Forecast title=\"daily forecast\" items={weather.daily}/>\n        </>\n      )}\n      {/* <ReactNotifications /> */}\n      <ToastContainer autoClose={5000} theme='colored' newestOnTop={true}/>\n    </div>\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}